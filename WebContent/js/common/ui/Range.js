define("common/ui/Range",["plugin/jquery","common/ui/Tips","common/ui/Follow"],function(a,b,c){a("plugin/jquery");var d=a("common/ui/Tips"),e="ui_range",f=e+"_";$.fn.range=function(a){return $(this).each(function(){$(this).data("range",new g($(this),a))})};var g=function(a,b){var c=this,g={tips:function(a){return a}},h=$.extend({},g,b||{}),i=a.attr("min")||0,j=a.attr("max")||100,k=a.attr("step")||1,l=$("<div></div>").attr("class",a.attr("class")).addClass(e),m=$("<div></div>").addClass(f+"track"),n=$("<a></a>").addClass(f+"thumb");a.before(l),0==l.width()&&l.width(a.width()),m.append(n),l.append(m),l.click(function(b){var d=b&&b.target;if(d&&d!=n.get(0)){var e=b.clientX-(n.offset().left-$(window).scrollLeft())-n.width()/2;c.value(1*a.val()+(j-i)*e/$(this).width())}});var o={};return n.mousedown(function(b){o.x=b.clientX,o.value=1*a.val(),$.isFunction(h.tips)&&(c.tips?c.tips.show(h.tips.call(a,o.value)):c.tips=new d(n,{eventType:"null",content:h.tips(o.value)})),$(this).addClass("active")}),$(document).mousemove(function(b){if("number"==typeof o.x){var d=b.clientX-o.x;c.value(o.value+(j-i)*d/l.width()),c.tips&&c.tips.show(h.tips.call(a,a.val())),b.preventDefault()}}),$(document).mouseup(function(a){o.x=null,o.value=null,n.removeClass("active"),c.tips&&c.tips.hide()}),this.num={min:+i,max:+j,step:+k},this.el={input:a,container:l,track:m,thumb:n},this.obj={},this.value(),this};return g.prototype.value=function(a){var b=this.el.input,c=b.val(),d=this.num.max,e=this.num.min,f=this.num.step;return a||(c=a,a=$.trim(b.val())),a=a>d||f/2>d-a?d:""==a||e>a||f/2>a-e?e:e+Math.round((a-e)/f)*f,b.val(a),this.position(),a!=c&&b.trigger("change"),this},g.prototype.position=function(){var a=this.el.input,b=a.val(),c=this.num.max,d=this.num.min;this.num.step;return this.el.track.css("borderLeftWidth",this.el.container.width()*(b-d)/(c-d)),this},g});